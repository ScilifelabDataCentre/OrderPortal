{# Information page. #}

{% extends "base.html" %}

{% block head_title %}{{ info.get('title') or info['name'] }}{% end %}
{% block body_title %}{{ info.get('title') or info['name'] }}{% end %}

{% block main_content %}
{% module Markdown(info.get('text'), safe=True) %}
{% end %} 

{% block action_content %}
{% if is_admin %}
<p>
  <form action="{{ reverse_url('info_edit', info['name']) }}"
        method="GET" role="form">
    <button type="submit" class="btn btn-primary btn-block">
          <span class="glyphicon glyphicon-edit"></span> Edit</button>
      </form>
</p>
<p>
  <form action="{{ reverse_url('info', info['name']) }}"
        method="POST" role="form" style="margin-top: 20px;">
    {% module xsrf_form_html() %}
    <input type="hidden" name="_http_method" value="delete">
    <button type="submit" class="btn btn-danger btn-block"
            onclick="return confirm('Cannot be undone! Really delete?');">
      <span class="glyphicon glyphicon-trash"></span> Delete</button>
  </form>
</p>
{% end %} {# if is_admin #}

<p>
  <div>
    {% for n, t in infos %}
    <li>
      <a href="{{ reverse_url('info', n) }}">
        {{ t or n }}
      </a>
    </li>
    {% end %}
  </div>
</p>
{% end %} {# action_block content #}
