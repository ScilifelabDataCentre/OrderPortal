{# Group edit page. #}

{% extends "base.html" %}

{% block head_title %}Edit group {{ group['name'] }}{% end %}

{% block body_title %}
Edit
{% module Icon('group') %}
{{ group['name'] }}
{% end %}

{% block main_content %}
<form action="{{ reverse_url('group_edit', group['_id']) }}"
      role="form"
      method="POST">
  {% module xsrf_form_html() %}

  <div class="form-group">
    <div class="row">
      <div class="col-md-8">
	<label class="control-label" for="owner">Owner</label>
	<select name="owner" id="owner" class="form-control">
	  {% for member in group['members'] %}
	  <option {{ member == group['owner'] and 'selected' or ''}}>
	    {{ member }}
	  </option>
	  {% end %}
	</select>
      </div>
    </div>
  </div>

  <div class="form-group has-feedback">
    <div class="row">
      <div class="col-md-8">
	<label class="control-label" for="name">Name</label>
	<input type="text" class="form-control"
	       name="name" id="name" value="{{ group['name'] }}">
	<span style="color:red; margin-right: 1em;"
	      class="glyphicon glyphicon-star form-control-feedback"
	      aria-hidden="true">
	</span>
      </div>
    </div>
    <span class="help-block">
      Name of group. It is not required to be unique, but it is a good
      idea to make it so anyway.
    </span>
  </div>

  <div class="form-group">
    <div class="row">
      <div class="col-md-8">
	<label class="control-label" for="members">Members</label>
	<textarea class="form-control" name="members" id="members"
		  >{{ '\n'.join(group['members']) }}</textarea>
      </div>
    </div>
    <span class="help-block">
      Email addresses of members, which must have accounts in the
      system.  One per line.
    </span>
  </div>

  <div class="form-group">
    <label class="control-label"></label>
    <button type="submit"
	    class="btn btn-primary glyphicon glyphicon-plus">
      Save
    </button>
  </div>

</form>

<br>
<form action="{{ reverse_url('group', group['_id']) }}"
      role="form"
      method="GET">
  <div class="form-group">
    <label class="control-label"></label>
    <button type="submit"
	    class="btn btn-default glyphicon glyphicon-remove">
      Cancel
    </button>
  </div>
</form>

{% end %} {# block main_content #}
