{# Field edit page. #}
{% extends "base.html" %}

{% block content %}
<form action="{{ reverse_url('field_edit', form['_id'], field['identifier']) }}"
      method="POST">
  {% module xsrf_form_html() %}

  <table class="fields">

    <tr>
      <th>Identifier</th>
      <td>{% module Icon('required') %}</td>
      <td>{{ field['identifier'] }}</td>
      <td class="description">
	Unique identifier of the field. Cannot be changed.
      </td>
    </tr>

    <tr>
      <th>Label</th>
      <td></td>
      <td>
	<input type="text" name="label"
	       value="{{ field.get('label') or '' }}">
      </td>
      <td class="description">
	Label to display for the field in the order form. The
	identifier will be used if this is not provided.
      </td>
    </tr>

    <tr>
      <th>Type</th>
      <td>{% module Icon('required') %}</td>
      <td>{{ field['type'] }}</td>
      <td class="description">
	Data type of the field. Cannot be changed.
      </td>
    </tr>

    {% if field['type'] == constants.SELECT['value'] %}
    <tr>
      <th>Select</th>
      <td>{% module Icon('required') %}</td>
      <td>
	<textarea name="select">{{ field.get('select') or '' }}</textarea>
      </td>
      <td class="description">
	Values to select among. One per line. The first value is the default.
      </td>
    </tr>
    {% end %}

    <tr>
      <th>Required</th>
      <td></td>
      <td>
	{% if field['required'] %}
	  <input type="checkbox" name="required" value="yes" checked> Yes
	{% else %}
	  <input type="checkbox" name="required" value="yes"> Yes
	{% end %}
      </td>
      <td class="description">
	Require that the field must have a value specified in the order.
	If no value, then the order is incomplete, and cannot be submitted.
      </td>
    </tr>

    <tr>
      <th>Restricted read</th>
      <td></td>
      <td>
	{% if field['restrict_read'] %}
	  <input type="checkbox" name="restrict_read" value="yes" checked> Yes
	{% else %}
	  <input type="checkbox" name="restrict_read" value="yes"> Yes
	{% end %}
      </td>
      <td class="description">
	The field is restricted to be visible only to staff, not the user.
      </td>
    </tr>

    <tr>
      <th>Restricted write</th>
      <td></td>
      <td>
	{% if field['restrict_write'] %}
	  <input type="checkbox" name="restrict_write" value="yes" checked> Yes
	{% else %}
	  <input type="checkbox" name="restrict_write" value="yes"> Yes
	{% end %}
      </td>
      <td class="description">
	The field is restricted to be editable only by staff, not the user.
      </td>
    </tr>

    <tr>
      <th>Description</th>
      <td></td>
      <td>
	<textarea name="description">{{ field.get('description') or '' }}</textarea>
      </td>
      <td class="description">
	Description to display in the order as information to the user.
      </td>
    </tr>

  </table>

  <p>

  {% module Submit('save') %}
</form>

<form action="{{ reverse_url('field_edit', form['_id'], field['identifier']) }}"
      method="POST">
  {% module xsrf_form_html() %}
  <input type="hidden" name="_http_method" value="delete">
  {% module Submit('delete') %}
</form>

<p>
<form action="{{ reverse_url('form', form['_id']) }}"
      method="GET">
  {% module Submit('cancel') %}
</form>
{% end %}
