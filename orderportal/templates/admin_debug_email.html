{# Admin debug email to figure out Google SMTP issue. #}

{% extends "base.html" %}

{% block head_title %}Debug email{% end %}
{% block body_title %}Debug email{% end %}

{% block main_content %}
<form action="{{ reverse_url('admin_debug_email') }}"
      method="POST" role="form">
  {% module xsrf_form_html() %}

  <div class="form-group">
    <div class="row">
      <div class="col-md-4">
        <label for="server">SMTP server</label>
        <input type="text" id="server" name="server"
               class="form-control" value="{{ settings['MAIL_SERVER'] or '' }}">
      </div>
    </div>
  </div>

  <div class="form-group">
    <div class="row">
      <div class="col-md-10">
        <div class="radio">
          <label>
            <input type="radio" name="protocol" value="TLS" 
                   {{ settings['MAIL_USE_TLS'] and 'checked' or '' }}> TLS
          </label>
        </div>
        <div class="radio">
          <label>
            <input type="radio" name="protocol" value="SSL" 
                   {{ settings['MAIL_USE_SSL'] and 'checked' or '' }}> SSL
          </label>
        </div>
        <div class="radio">
          <label>
            <input type="radio" name="protocol" value="neither"
                   {{ not (settings['MAIL_USE_TLS'] or settings['MAIL_USE_SSL']) and 'checked' or '' }}> neither
          </label>
        </div>
      </div>
    </div>
  </div>

  <div class="form-group">
    <div class="row">
      <div class="col-md-4">
        <label for="ehlo">EHLO</label>
        <input type="text" id="ehlo" name="ehlo"
               class="form-control" placeholder="[No EHLO]"
               value="{{ settings['MAIL_EHLO'] or '' }}">
      </div>
    </div>
  </div>

  <div class="form-group">
    <div class="row">
      <div class="col-md-2">
        <label for="port">Port</label>
        <input type="number" class="form-control" id="port" name="port"
               value="{{ settings['MAIL_PORT'] or 587 }}">
      </div>
    </div>
  </div>

  <div class="form-group">
    <div class="row">
      <div class="col-md-4">
        <label for="username">Username</label>
        <input type="text" id="username" name="username"
               class="form-control" value="{{ settings['MAIL_USERNAME'] or '' }}">
      </div>
    </div>
  </div>

  <div class="form-group">
    <div class="row">
      <div class="col-md-4">
        <label for="password">Password</label>
        <input type="text" id="password" name="password"
               class="form-control" value="{{ settings['MAIL_PASSWORD'] or '' }}">
      </div>
    </div>
  </div>

  <div class="form-group">
    <div class="row">
      <div class="col-md-4">
        <label for="recipient">Recipient</label>
        <input type="text" id="recipient" name="recipient"
               class="form-control" value="per.kraulis@gmail.com">
      </div>
    </div>
  </div>

  <div class="form-group">
    <div class="row">
      <div class="col-md-4">
        <label for="subject">Subject</label>
        <input type="text" id="subject" name="subject"
               class="form-control" value="Email test">
      </div>
    </div>
  </div>

  <div class="form-group">
    <div class="row">
      <div class="col-md-10">
        <label for="content">Content</label>
        <input type="text" id="content" name="content"
               class="form-control" value="Testing Google SMTP.">
      </div>
    </div>
  </div>

  <div class="form-group">
    <div class="row">
      <div class="col-md-3">
        <label class="control-label"></label>
        <button type="submit" class="btn btn-success btn-block">
          Send
      </div>
    </div>
  </div>
</form>
{% end %} {# block main_content #}
